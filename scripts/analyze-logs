#!/usr/bin/env bash
# Analyze ALFRD logs
#
# Usage:
#   ./scripts/analyze-logs                    # Show overview
#   ./scripts/analyze-logs --stuck            # Find stuck documents
#   ./scripts/analyze-logs --errors           # Show recent errors
#   ./scripts/analyze-logs --aws-usage        # AWS usage stats
#   ./scripts/analyze-logs --cache-stats      # Cache stats
#   ./scripts/analyze-logs --entity <uuid>    # Trace specific entity

# Determine project root
SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
PROJECT_ROOT="$(cd "$SCRIPT_DIR/.." && pwd)"

# Activate venv if it exists
if [ -d "$PROJECT_ROOT/venv" ]; then
    source "$PROJECT_ROOT/venv/bin/activate"
fi

# Change to project root
cd "$PROJECT_ROOT"

# Run analyzer
python3 document-processor/src/document_processor/cli/analyze-logs.py "$@"