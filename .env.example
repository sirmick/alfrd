# ALFRD - Environment Configuration Example
# Copy this file to .env and update with your actual values

# =====================================
# PostgreSQL Database Configuration
# =====================================

# Unix socket connection (preferred for local development)
# %20 is URL encoding for space character in password
DATABASE_URL=postgresql://mick:%20@/alfrd?host=/var/run/postgresql

# PostgreSQL password (single space)
POSTGRES_PASSWORD=" "

# Connection pool settings
DB_POOL_MIN_SIZE=5
DB_POOL_MAX_SIZE=20
DB_POOL_TIMEOUT=30.0

# =====================================
# LLM Provider Configuration
# =====================================

# Options: "bedrock", "lmstudio", "openai"
LLM_PROVIDER=bedrock

# =====================================
# AWS Bedrock Configuration (when LLM_PROVIDER=bedrock)
# =====================================

# Model ID (using Nova Lite by default)
BEDROCK_MODEL_ID=us.amazon.nova-lite-v1:0
BEDROCK_MAX_TOKENS=4096

# Alternative: Claude Sonnet 4 (requires authorization)
# BEDROCK_MODEL_ID=anthropic.claude-3-5-sonnet-20241022-v2:0

# =====================================
# LM Studio Configuration (when LLM_PROVIDER=lmstudio)
# =====================================

# LM Studio provides an OpenAI-compatible API
LMSTUDIO_BASE_URL=http://localhost:1234/v1
LMSTUDIO_MODEL=local-model

# =====================================
# OpenAI Configuration (when LLM_PROVIDER=openai)
# =====================================

OPENAI_API_KEY=
OPENAI_BASE_URL=https://api.openai.com/v1
OPENAI_MODEL=gpt-4o-mini

# =====================================
# OCR Provider Configuration
# =====================================

# Options: "textract", "tesseract"
OCR_PROVIDER=textract

# Tesseract Configuration (when OCR_PROVIDER=tesseract)
# Leave blank to use system default tesseract binary
TESSERACT_CMD=
TESSERACT_LANG=eng

# =====================================
# AWS Credentials (for Textract OCR and Bedrock LLM)
# =====================================

AWS_ACCESS_KEY_ID=your-access-key-here
AWS_SECRET_ACCESS_KEY=your-secret-key-here
AWS_REGION=us-east-1

# =====================================
# AWS API Caching (NEW)
# =====================================

# Enable caching to save money during testing (caches identical requests)
# Recommended: true for development/testing, false for production
AWS_CACHE_ENABLED=true

# Maximum number of cached API responses
AWS_CACHE_MAX_SIZE=1000

# =====================================
# File Storage Paths
# =====================================

INBOX_PATH=./data/inbox
DOCUMENTS_PATH=./data/documents
SUMMARIES_PATH=./data/summaries
EXPORTS_PATH=./data/exports

# =====================================
# API Configuration
# =====================================

API_HOST=0.0.0.0
API_PORT=8000
MCP_PORT=3000

# =====================================
# Prefect Worker Pool Configuration
# =====================================

# Max threads for ThreadPoolExecutor (blocking I/O operations)
PREFECT_MAX_THREADS=2

# Max concurrent document processing flows
PREFECT_MAX_DOCUMENT_FLOWS=5

# Max concurrent file generation flows
PREFECT_MAX_FILE_FLOWS=2

# Task-level concurrency limits (asyncio semaphores)
PREFECT_TEXTRACT_WORKERS=3  # AWS Textract API calls
PREFECT_BEDROCK_WORKERS=5   # AWS Bedrock API calls
PREFECT_FILE_GENERATION_WORKERS=2  # File summary generation

# =====================================
# Legacy Worker Pool Configuration (deprecated)
# =====================================

# OCR Workers (AWS Textract concurrency)
OCR_WORKERS=3
OCR_POLL_INTERVAL=5

# Classifier Workers (Bedrock API concurrency)
CLASSIFIER_WORKERS=5
CLASSIFIER_POLL_INTERVAL=3

# Classifier Scorer Workers
CLASSIFIER_SCORER_WORKERS=3
CLASSIFIER_SCORER_POLL_INTERVAL=5

# Summarizer Workers
SUMMARIZER_WORKERS=3
SUMMARIZER_POLL_INTERVAL=3

# Summarizer Scorer Workers
SUMMARIZER_SCORER_WORKERS=2
SUMMARIZER_SCORER_POLL_INTERVAL=5

# Worker batch multiplier
WORKER_BATCH_MULTIPLIER=2

# =====================================
# Prompt Evolution Configuration
# =====================================

CLASSIFIER_PROMPT_MAX_WORDS=300
MIN_DOCUMENTS_FOR_SCORING=1
PROMPT_UPDATE_THRESHOLD=0.05

# =====================================
# Logging
# =====================================

LOG_LEVEL=INFO
ENV=development
PYTHONUNBUFFERED=1

# =====================================
# Legacy API Keys (optional)
# =====================================

# Claude API (legacy - not currently used)
# CLAUDE_API_KEY=sk-ant-...

# OpenRouter API (legacy - not currently used)
# OPENROUTER_API_KEY=sk-or-...